const candlesReq = {"currencyPair":"BTC_USDT","timeFrame":"ONE_DAY","startTime":"2018-08-01T00:00:00","endTime":"2018-10-10T15:54:06"};
const candlesRes = [{"openTime":"2018-08-01T00:00:00","closeTime":"2018-08-01T23:59:59.999","open":7735.67,"high":7750.0,"low":7430.0,"close":7604.58,"volume":42582.312932,"quoteAssetVolume":322252070.44348677,"takerBuyBaseAssetVolume":22159.785618,"takerBuyQuoteAssetVolume":167734477.27458395,"numberOfTrades":208008,"ignore":"0"},{"openTime":"2018-08-02T00:00:00","closeTime":"2018-08-02T23:59:59.999","open":7600.08,"high":7709.46,"low":7455.72,"close":7525.71,"volume":37665.696684,"quoteAssetVolume":285656680.7015636,"takerBuyBaseAssetVolume":21216.838126,"takerBuyQuoteAssetVolume":160971512.85409076,"numberOfTrades":175627,"ignore":"0"},{"openTime":"2018-08-03T00:00:00","closeTime":"2018-08-03T23:59:59.999","open":7525.71,"high":7540.0,"low":7282.44,"close":7418.78,"volume":44669.486047,"quoteAssetVolume":330599837.7285522,"takerBuyBaseAssetVolume":23397.041835,"takerBuyQuoteAssetVolume":173144499.51146756,"numberOfTrades":226727,"ignore":"0"},{"openTime":"2018-08-04T00:00:00","closeTime":"2018-08-04T23:59:59.999","open":7412.27,"high":7494.81,"low":6926.0,"close":7009.84,"volume":36288.42601,"quoteAssetVolume":262282965.48573316,"takerBuyBaseAssetVolume":17770.555156,"takerBuyQuoteAssetVolume":128601932.84105054,"numberOfTrades":199335,"ignore":"0"},{"openTime":"2018-08-05T00:00:00","closeTime":"2018-08-05T23:59:59.999","open":7009.84,"high":7089.87,"low":6882.29,"close":7024.19,"volume":32894.849782,"quoteAssetVolume":229992627.52322165,"takerBuyBaseAssetVolume":18335.956341,"takerBuyQuoteAssetVolume":128216222.18516615,"numberOfTrades":148658,"ignore":"0"},{"openTime":"2018-08-06T00:00:00","closeTime":"2018-08-06T23:59:59.999","open":7024.19,"high":7160.0,"low":6821.0,"close":6934.82,"volume":32760.191643,"quoteAssetVolume":229071781.1153667,"takerBuyBaseAssetVolume":17486.151576,"takerBuyQuoteAssetVolume":122304301.71216843,"numberOfTrades":177378,"ignore":"0"},{"openTime":"2018-08-07T00:00:00","closeTime":"2018-08-07T23:59:59.999","open":6935.0,"high":7150.46,"low":6670.0,"close":6720.06,"volume":45438.473501,"quoteAssetVolume":316365882.1031662,"takerBuyBaseAssetVolume":24012.696862,"takerBuyQuoteAssetVolume":167343592.15417216,"numberOfTrades":247202,"ignore":"0"},{"openTime":"2018-08-08T00:00:00","closeTime":"2018-08-08T23:59:59.999","open":6720.63,"high":6721.54,"low":6123.0,"close":6285.0,"volume":59550.536319,"quoteAssetVolume":382460776.49398139,"takerBuyBaseAssetVolume":30204.484969,"takerBuyQuoteAssetVolume":194091707.79787878,"numberOfTrades":305603,"ignore":"0"},{"openTime":"2018-08-09T00:00:00","closeTime":"2018-08-09T23:59:59.999","open":6283.27,"high":6622.81,"low":6178.6,"close":6529.79,"volume":51941.185111,"quoteAssetVolume":332880900.89059939,"takerBuyBaseAssetVolume":28290.848883,"takerBuyQuoteAssetVolume":181381407.1101644,"numberOfTrades":248573,"ignore":"0"},{"openTime":"2018-08-10T00:00:00","closeTime":"2018-08-10T23:59:59.999","open":6529.79,"high":6575.88,"low":6026.39,"close":6144.01,"volume":59034.974902,"quoteAssetVolume":374699380.9484915,"takerBuyBaseAssetVolume":31034.532468,"takerBuyQuoteAssetVolume":197214827.2919826,"numberOfTrades":289661,"ignore":"0"},{"openTime":"2018-08-11T00:00:00","closeTime":"2018-08-11T23:59:59.999","open":6148.13,"high":6488.0,"low":5971.0,"close":6232.35,"volume":47133.418555,"quoteAssetVolume":291056267.0892287,"takerBuyBaseAssetVolume":26083.971425,"takerBuyQuoteAssetVolume":160978348.30636577,"numberOfTrades":236173,"ignore":"0"},{"openTime":"2018-08-12T00:00:00","closeTime":"2018-08-12T23:59:59.999","open":6222.55,"high":6472.3,"low":6130.0,"close":6308.33,"volume":38567.770712,"quoteAssetVolume":243227298.87942723,"takerBuyBaseAssetVolume":20954.747314,"takerBuyQuoteAssetVolume":132190051.41706527,"numberOfTrades":190399,"ignore":"0"},{"openTime":"2018-08-13T00:00:00","closeTime":"2018-08-13T23:59:59.999","open":6308.56,"high":6545.0,"low":6145.04,"close":6246.35,"volume":53895.828783,"quoteAssetVolume":341552293.0073001,"takerBuyBaseAssetVolume":29517.276269,"takerBuyQuoteAssetVolume":187178430.28020314,"numberOfTrades":239602,"ignore":"0"},{"openTime":"2018-08-14T00:00:00","closeTime":"2018-08-14T23:59:59.999","open":6248.25,"high":6250.33,"low":5880.0,"close":6188.08,"volume":50186.745091,"quoteAssetVolume":303179556.3624503,"takerBuyBaseAssetVolume":25530.653498,"takerBuyQuoteAssetVolume":154285607.85051606,"numberOfTrades":252004,"ignore":"0"},{"openTime":"2018-08-15T00:00:00","closeTime":"2018-08-15T23:59:59.999","open":6188.08,"high":6609.0,"low":6172.11,"close":6267.16,"volume":68806.687026,"quoteAssetVolume":439109005.4034304,"takerBuyBaseAssetVolume":37144.042168,"takerBuyQuoteAssetVolume":237077628.52971668,"numberOfTrades":329413,"ignore":"0"},{"openTime":"2018-08-16T00:00:00","closeTime":"2018-08-16T23:59:59.999","open":6265.27,"high":6480.0,"low":6205.6,"close":6311.75,"volume":48515.254618,"quoteAssetVolume":307755605.1624039,"takerBuyBaseAssetVolume":26023.549007,"takerBuyQuoteAssetVolume":165123672.3296188,"numberOfTrades":228942,"ignore":"0"},{"openTime":"2018-08-17T00:00:00","closeTime":"2018-08-17T23:59:59.999","open":6316.0,"high":6585.0,"low":6285.4,"close":6584.49,"volume":57851.610803,"quoteAssetVolume":374472431.7235812,"takerBuyBaseAssetVolume":32407.884552,"takerBuyQuoteAssetVolume":209831423.42862133,"numberOfTrades":296730,"ignore":"0"},{"openTime":"2018-08-18T00:00:00","closeTime":"2018-08-18T23:59:59.999","open":6579.04,"high":6620.0,"low":6288.0,"close":6387.96,"volume":53742.322172,"quoteAssetVolume":345964004.3657212,"takerBuyBaseAssetVolume":29469.810485,"takerBuyQuoteAssetVolume":189808853.55518274,"numberOfTrades":276121,"ignore":"0"},{"openTime":"2018-08-19T00:00:00","closeTime":"2018-08-19T23:59:59.999","open":6387.96,"high":6541.0,"low":6300.0,"close":6477.53,"volume":45190.847994,"quoteAssetVolume":289271954.55326536,"takerBuyBaseAssetVolume":25368.613272,"takerBuyQuoteAssetVolume":162405728.97807814,"numberOfTrades":190758,"ignore":"0"},{"openTime":"2018-08-20T00:00:00","closeTime":"2018-08-20T23:59:59.999","open":6477.53,"high":6530.0,"low":6220.0,"close":6254.84,"volume":49435.55526,"quoteAssetVolume":317617945.7492608,"takerBuyBaseAssetVolume":26468.017091,"takerBuyQuoteAssetVolume":170185693.09984116,"numberOfTrades":237055,"ignore":"0"},{"openTime":"2018-08-21T00:00:00","closeTime":"2018-08-21T23:59:59.999","open":6251.0,"high":6500.0,"low":6235.08,"close":6480.0,"volume":41569.947408,"quoteAssetVolume":265458342.7817206,"takerBuyBaseAssetVolume":23219.823973,"takerBuyQuoteAssetVolume":148276323.26185248,"numberOfTrades":180578,"ignore":"0"},{"openTime":"2018-08-22T00:00:00","closeTime":"2018-08-22T23:59:59.999","open":6479.98,"high":6882.54,"low":6251.2,"close":6360.89,"volume":77909.391359,"quoteAssetVolume":512501182.2029021,"takerBuyBaseAssetVolume":40431.002002,"takerBuyQuoteAssetVolume":266272244.80136199,"numberOfTrades":326562,"ignore":"0"},{"openTime":"2018-08-23T00:00:00","closeTime":"2018-08-23T23:59:59.999","open":6362.57,"high":6576.99,"low":6342.28,"close":6525.01,"volume":40358.166825,"quoteAssetVolume":259786384.55491505,"takerBuyBaseAssetVolume":22134.603236,"takerBuyQuoteAssetVolume":142492145.48212315,"numberOfTrades":187637,"ignore":"0"},{"openTime":"2018-08-24T00:00:00","closeTime":"2018-08-24T23:59:59.999","open":6525.0,"high":6725.0,"low":6440.5,"close":6681.64,"volume":38305.675322,"quoteAssetVolume":251513064.47447149,"takerBuyBaseAssetVolume":21280.935824,"takerBuyQuoteAssetVolume":139769204.2073669,"numberOfTrades":180167,"ignore":"0"},{"openTime":"2018-08-25T00:00:00","closeTime":"2018-08-25T23:59:59.999","open":6686.98,"high":6789.0,"low":6650.61,"close":6733.64,"volume":19220.505929,"quoteAssetVolume":129083702.47542233,"takerBuyBaseAssetVolume":9829.849484,"takerBuyQuoteAssetVolume":66019304.90679335,"numberOfTrades":122483,"ignore":"0"},{"openTime":"2018-08-26T00:00:00","closeTime":"2018-08-26T23:59:59.999","open":6733.64,"high":6775.27,"low":6568.0,"close":6700.0,"volume":20107.297208,"quoteAssetVolume":134117930.3957502,"takerBuyBaseAssetVolume":9897.250377,"takerBuyQuoteAssetVolume":66041984.74840774,"numberOfTrades":130769,"ignore":"0"},{"openTime":"2018-08-27T00:00:00","closeTime":"2018-08-27T23:59:59.999","open":6700.0,"high":6940.51,"low":6646.5,"close":6908.64,"volume":37747.078747,"quoteAssetVolume":254214730.3171242,"takerBuyBaseAssetVolume":21458.101843,"takerBuyQuoteAssetVolume":144536972.8579014,"numberOfTrades":205441,"ignore":"0"},{"openTime":"2018-08-28T00:00:00","closeTime":"2018-08-28T23:59:59.999","open":6907.26,"high":7135.0,"low":6860.0,"close":7076.11,"volume":48352.917163,"quoteAssetVolume":338220284.2901657,"takerBuyBaseAssetVolume":26495.589966,"takerBuyQuoteAssetVolume":185343334.34057818,"numberOfTrades":252033,"ignore":"0"},{"openTime":"2018-08-29T00:00:00","closeTime":"2018-08-29T23:59:59.999","open":7077.0,"high":7133.81,"low":6912.34,"close":7031.22,"volume":43252.487392,"quoteAssetVolume":304565438.4850058,"takerBuyBaseAssetVolume":23716.20275,"takerBuyQuoteAssetVolume":167062558.37522663,"numberOfTrades":223772,"ignore":"0"},{"openTime":"2018-08-30T00:00:00","closeTime":"2018-08-30T23:59:59.999","open":7033.21,"high":7063.63,"low":6784.81,"close":6984.84,"volume":44716.77462,"quoteAssetVolume":309357226.58362528,"takerBuyBaseAssetVolume":24453.041781,"takerBuyQuoteAssetVolume":169234472.84231017,"numberOfTrades":230848,"ignore":"0"},{"openTime":"2018-08-31T00:00:00","closeTime":"2018-08-31T23:59:59.999","open":6984.84,"high":7089.0,"low":6888.0,"close":7011.21,"volume":40467.400638,"quoteAssetVolume":282722730.0613195,"takerBuyBaseAssetVolume":21668.412208,"takerBuyQuoteAssetVolume":151377811.89247839,"numberOfTrades":203142,"ignore":"0"},{"openTime":"2018-09-01T00:00:00","closeTime":"2018-09-01T23:59:59.999","open":7011.21,"high":7275.0,"low":7008.74,"close":7200.01,"volume":40323.414093,"quoteAssetVolume":287299347.7691456,"takerBuyBaseAssetVolume":22552.716145,"takerBuyQuoteAssetVolume":160667815.7528499,"numberOfTrades":217286,"ignore":"0"},{"openTime":"2018-09-02T00:00:00","closeTime":"2018-09-02T23:59:59.999","open":7201.57,"high":7345.45,"low":7127.0,"close":7302.01,"volume":39814.840352,"quoteAssetVolume":288526018.71327897,"takerBuyBaseAssetVolume":22422.52063,"takerBuyQuoteAssetVolume":162523675.69236816,"numberOfTrades":210282,"ignore":"0"},{"openTime":"2018-09-03T00:00:00","closeTime":"2018-09-03T23:59:59.999","open":7302.0,"high":7338.28,"low":7191.63,"close":7263.02,"volume":32396.018371,"quoteAssetVolume":235393601.42514039,"takerBuyBaseAssetVolume":16914.880588,"takerBuyQuoteAssetVolume":122917873.88750284,"numberOfTrades":173846,"ignore":"0"},{"openTime":"2018-09-04T00:00:00","closeTime":"2018-09-04T23:59:59.999","open":7263.0,"high":7410.0,"low":7227.17,"close":7359.06,"volume":35300.640518,"quoteAssetVolume":258978411.27108596,"takerBuyBaseAssetVolume":19983.177591,"takerBuyQuoteAssetVolume":146619387.998844,"numberOfTrades":183178,"ignore":"0"},{"openTime":"2018-09-05T00:00:00","closeTime":"2018-09-05T23:59:59.999","open":7359.05,"high":7397.3,"low":6682.0,"close":6700.0,"volume":63715.256267,"quoteAssetVolume":449463489.0579975,"takerBuyBaseAssetVolume":31531.579021,"takerBuyQuoteAssetVolume":222719950.68442563,"numberOfTrades":308813,"ignore":"0"},{"openTime":"2018-09-06T00:00:00","closeTime":"2018-09-06T23:59:59.999","open":6697.27,"high":6725.0,"low":6265.0,"close":6516.01,"volume":60644.464227,"quoteAssetVolume":390391932.2091176,"takerBuyBaseAssetVolume":32332.549533,"takerBuyQuoteAssetVolume":208137324.51688049,"numberOfTrades":280845,"ignore":"0"},{"openTime":"2018-09-07T00:00:00","closeTime":"2018-09-07T23:59:59.999","open":6516.84,"high":6544.0,"low":6320.0,"close":6395.54,"volume":38906.28805,"quoteAssetVolume":250716129.90518979,"takerBuyBaseAssetVolume":21463.035571,"takerBuyQuoteAssetVolume":138344836.356928,"numberOfTrades":194451,"ignore":"0"},{"openTime":"2018-09-08T00:00:00","closeTime":"2018-09-08T23:59:59.999","open":6395.54,"high":6478.0,"low":6111.0,"close":6185.05,"volume":38215.032171,"quoteAssetVolume":241711345.37120346,"takerBuyBaseAssetVolume":19615.084193,"takerBuyQuoteAssetVolume":124201124.44821739,"numberOfTrades":180831,"ignore":"0"},{"openTime":"2018-09-09T00:00:00","closeTime":"2018-09-09T23:59:59.999","open":6185.06,"high":6441.0,"low":6141.53,"close":6250.81,"volume":37053.92382,"quoteAssetVolume":233583450.1054205,"takerBuyBaseAssetVolume":20804.78067,"takerBuyQuoteAssetVolume":131143409.64187043,"numberOfTrades":176709,"ignore":"0"},{"openTime":"2018-09-10T00:00:00","closeTime":"2018-09-10T23:59:59.999","open":6252.26,"high":6373.98,"low":6221.0,"close":6312.0,"volume":32439.456432,"quoteAssetVolume":204178349.9698747,"takerBuyBaseAssetVolume":18454.695984,"takerBuyQuoteAssetVolume":116171984.1646136,"numberOfTrades":165286,"ignore":"0"},{"openTime":"2018-09-11T00:00:00","closeTime":"2018-09-11T23:59:59.999","open":6311.99,"high":6404.0,"low":6169.68,"close":6294.91,"volume":33104.88859,"quoteAssetVolume":208346648.80045937,"takerBuyBaseAssetVolume":18417.973606,"takerBuyQuoteAssetVolume":115940661.5120764,"numberOfTrades":173335,"ignore":"0"},{"openTime":"2018-09-12T00:00:00","closeTime":"2018-09-12T23:59:59.999","open":6293.0,"high":6360.0,"low":6192.37,"close":6338.62,"volume":31433.645939000002,"quoteAssetVolume":197398009.01256667,"takerBuyBaseAssetVolume":17211.99689,"takerBuyQuoteAssetVolume":108098184.76419269,"numberOfTrades":165590,"ignore":"0"},{"openTime":"2018-09-13T00:00:00","closeTime":"2018-09-13T23:59:59.999","open":6338.62,"high":6535.0,"low":6337.4,"close":6487.38,"volume":40465.063107,"quoteAssetVolume":260985165.19184465,"takerBuyBaseAssetVolume":21685.302869,"takerBuyQuoteAssetVolume":139897583.37583558,"numberOfTrades":215637,"ignore":"0"},{"openTime":"2018-09-14T00:00:00","closeTime":"2018-09-14T23:59:59.999","open":6487.39,"high":6584.99,"low":6385.62,"close":6476.63,"volume":37173.339277,"quoteAssetVolume":241466662.64800576,"takerBuyBaseAssetVolume":19926.092246,"takerBuyQuoteAssetVolume":129446503.53889132,"numberOfTrades":198375,"ignore":"0"},{"openTime":"2018-09-15T00:00:00","closeTime":"2018-09-15T23:59:59.999","open":6476.63,"high":6565.45,"low":6466.13,"close":6514.96,"volume":25243.656612,"quoteAssetVolume":164557841.0798692,"takerBuyBaseAssetVolume":13631.32786,"takerBuyQuoteAssetVolume":88868550.64006232,"numberOfTrades":141362,"ignore":"0"},{"openTime":"2018-09-16T00:00:00","closeTime":"2018-09-16T23:59:59.999","open":6514.96,"high":6524.62,"low":6370.0,"close":6505.0,"volume":27568.132897,"quoteAssetVolume":178614079.15149955,"takerBuyBaseAssetVolume":15277.360294,"takerBuyQuoteAssetVolume":99017939.4839293,"numberOfTrades":145921,"ignore":"0"},{"openTime":"2018-09-17T00:00:00","closeTime":"2018-09-17T23:59:59.999","open":6500.08,"high":6533.84,"low":6201.0,"close":6248.69,"volume":35987.254738,"quoteAssetVolume":228970700.75042216,"takerBuyBaseAssetVolume":18132.460484,"takerBuyQuoteAssetVolume":115435845.03181573,"numberOfTrades":196924,"ignore":"0"},{"openTime":"2018-09-18T00:00:00","closeTime":"2018-09-18T23:59:59.999","open":6248.69,"high":6390.0,"low":6224.98,"close":6336.45,"volume":32620.86667,"quoteAssetVolume":205736329.40707866,"takerBuyBaseAssetVolume":18134.695327,"takerBuyQuoteAssetVolume":114376447.08866695,"numberOfTrades":169055,"ignore":"0"},{"openTime":"2018-09-19T00:00:00","closeTime":"2018-09-19T23:59:59.999","open":6336.39,"high":6517.7,"low":6123.0,"close":6391.89,"volume":39044.080082,"quoteAssetVolume":247455364.52379558,"takerBuyBaseAssetVolume":21198.526375,"takerBuyQuoteAssetVolume":134463617.32427765,"numberOfTrades":198215,"ignore":"0"},{"openTime":"2018-09-20T00:00:00","closeTime":"2018-09-20T23:59:59.999","open":6392.0,"high":6540.0,"low":6325.0,"close":6492.0,"volume":25189.024728,"quoteAssetVolume":161844271.63360686,"takerBuyBaseAssetVolume":13565.498887,"takerBuyQuoteAssetVolume":87206867.75902455,"numberOfTrades":153686,"ignore":"0"},{"openTime":"2018-09-21T00:00:00","closeTime":"2018-09-21T23:59:59.999","open":6492.0,"high":6784.86,"low":6491.0,"close":6759.02,"volume":51779.343463,"quoteAssetVolume":345746941.99998638,"takerBuyBaseAssetVolume":28398.418773,"takerBuyQuoteAssetVolume":189708795.74198134,"numberOfTrades":292494,"ignore":"0"},{"openTime":"2018-09-22T00:00:00","closeTime":"2018-09-22T23:59:59.999","open":6759.01,"high":6839.03,"low":6627.0,"close":6723.05,"volume":29349.690667,"quoteAssetVolume":197210670.8919785,"takerBuyBaseAssetVolume":16554.964632,"takerBuyQuoteAssetVolume":111254665.99411065,"numberOfTrades":145720,"ignore":"0"},{"openTime":"2018-09-23T00:00:00","closeTime":"2018-09-23T23:59:59.999","open":6723.05,"high":6788.23,"low":6661.75,"close":6708.0,"volume":30286.229773,"quoteAssetVolume":203479219.3864065,"takerBuyBaseAssetVolume":17052.636547,"takerBuyQuoteAssetVolume":114584135.91268952,"numberOfTrades":168354,"ignore":"0"},{"openTime":"2018-09-24T00:00:00","closeTime":"2018-09-24T23:59:59.999","open":6706.81,"high":6730.0,"low":6557.0,"close":6581.39,"volume":35305.73991,"quoteAssetVolume":234355999.54311828,"takerBuyBaseAssetVolume":18662.448471,"takerBuyQuoteAssetVolume":123915474.8670641,"numberOfTrades":185297,"ignore":"0"},{"openTime":"2018-09-25T00:00:00","closeTime":"2018-09-25T23:59:59.999","open":6581.42,"high":6584.01,"low":6325.02,"close":6447.54,"volume":40301.029452,"quoteAssetVolume":258927200.8310643,"takerBuyBaseAssetVolume":21316.072862,"takerBuyQuoteAssetVolume":136948219.4725573,"numberOfTrades":219965,"ignore":"0"},{"openTime":"2018-09-26T00:00:00","closeTime":"2018-09-26T23:59:59.999","open":6445.11,"high":6557.99,"low":6379.7,"close":6465.12,"volume":33484.54207,"quoteAssetVolume":216859675.30134345,"takerBuyBaseAssetVolume":18833.139688,"takerBuyQuoteAssetVolume":121969834.64946202,"numberOfTrades":184238,"ignore":"0"},{"openTime":"2018-09-27T00:00:00","closeTime":"2018-09-27T23:59:59.999","open":6467.84,"high":6750.0,"low":6434.0,"close":6689.13,"volume":33087.428297,"quoteAssetVolume":216914853.24175177,"takerBuyBaseAssetVolume":18395.789811,"takerBuyQuoteAssetVolume":120651951.00860989,"numberOfTrades":182590,"ignore":"0"},{"openTime":"2018-09-28T00:00:00","closeTime":"2018-09-28T23:59:59.999","open":6689.12,"high":6814.8,"low":6540.88,"close":6634.58,"volume":42399.448523,"quoteAssetVolume":283144987.5042306,"takerBuyBaseAssetVolume":23688.506549,"takerBuyQuoteAssetVolume":158267801.16155453,"numberOfTrades":211849,"ignore":"0"},{"openTime":"2018-09-29T00:00:00","closeTime":"2018-09-29T23:59:59.999","open":6634.58,"high":6636.0,"low":6464.57,"close":6596.38,"volume":30255.9597,"quoteAssetVolume":198424303.60660566,"takerBuyBaseAssetVolume":16037.032751,"takerBuyQuoteAssetVolume":105227105.4169398,"numberOfTrades":171027,"ignore":"0"},{"openTime":"2018-09-30T00:00:00","closeTime":"2018-09-30T23:59:59.999","open":6597.66,"high":6662.0,"low":6533.0,"close":6626.57,"volume":27764.724519,"quoteAssetVolume":183438992.37719537,"takerBuyBaseAssetVolume":15201.004317,"takerBuyQuoteAssetVolume":100438551.14193347,"numberOfTrades":153447,"ignore":"0"},{"openTime":"2018-10-01T00:00:00","closeTime":"2018-10-01T23:59:59.999","open":6626.57,"high":6667.09,"low":6510.0,"close":6611.61,"volume":20621.506894,"quoteAssetVolume":136115256.96830679,"takerBuyBaseAssetVolume":11063.811859,"takerBuyQuoteAssetVolume":73056146.10206315,"numberOfTrades":129733,"ignore":"0"},{"openTime":"2018-10-02T00:00:00","closeTime":"2018-10-02T23:59:59.999","open":6610.0,"high":6640.0,"low":6494.0,"close":6525.79,"volume":28245.810088,"quoteAssetVolume":185725492.2802391,"takerBuyBaseAssetVolume":15115.821022,"takerBuyQuoteAssetVolume":99418910.24218993,"numberOfTrades":147274,"ignore":"0"},{"openTime":"2018-10-03T00:00:00","closeTime":"2018-10-03T23:59:59.999","open":6525.79,"high":6549.0,"low":6430.0,"close":6510.0,"volume":28451.969138,"quoteAssetVolume":184622957.02490727,"takerBuyBaseAssetVolume":15296.711506,"takerBuyQuoteAssetVolume":99276382.4347858,"numberOfTrades":150607,"ignore":"0"},{"openTime":"2018-10-04T00:00:00","closeTime":"2018-10-04T23:59:59.999","open":6510.01,"high":6643.46,"low":6505.09,"close":6593.79,"volume":20074.300818,"quoteAssetVolume":132348680.67600607,"takerBuyBaseAssetVolume":11077.852512,"takerBuyQuoteAssetVolume":73043810.82721474,"numberOfTrades":96824,"ignore":"0"},{"openTime":"2018-10-05T00:00:00","closeTime":"2018-10-05T23:59:59.999","open":6591.69,"high":6697.0,"low":6543.08,"close":6635.65,"volume":16096.552392,"quoteAssetVolume":106264514.65757655,"takerBuyBaseAssetVolume":8593.749956,"takerBuyQuoteAssetVolume":56749217.58541545,"numberOfTrades":86701,"ignore":"0"},{"openTime":"2018-10-06T00:00:00","closeTime":"2018-10-06T23:59:59.999","open":6635.65,"high":6651.0,"low":6566.77,"close":6594.27,"volume":10939.505391,"quoteAssetVolume":72247942.41429408,"takerBuyBaseAssetVolume":5212.866094,"takerBuyQuoteAssetVolume":34437347.9568216,"numberOfTrades":62065,"ignore":"0"},{"openTime":"2018-10-07T00:00:00","closeTime":"2018-10-07T23:59:59.999","open":6596.44,"high":6640.0,"low":6525.0,"close":6615.26,"volume":17406.831762,"quoteAssetVolume":114489082.75364279,"takerBuyBaseAssetVolume":8768.20828,"takerBuyQuoteAssetVolume":57668448.4121986,"numberOfTrades":82844,"ignore":"0"},{"openTime":"2018-10-08T00:00:00","closeTime":"2018-10-08T23:59:59.999","open":6615.26,"high":6715.6,"low":6587.0,"close":6673.01,"volume":23123.419541,"quoteAssetVolume":153704602.4302414,"takerBuyBaseAssetVolume":12334.914967,"takerBuyQuoteAssetVolume":81982575.94542176,"numberOfTrades":135156,"ignore":"0"},{"openTime":"2018-10-09T00:00:00","closeTime":"2018-10-09T23:59:59.999","open":6673.01,"high":6685.38,"low":6607.0,"close":6656.61,"volume":15354.779469,"quoteAssetVolume":102115186.42882324,"takerBuyBaseAssetVolume":7606.922999,"takerBuyQuoteAssetVolume":50595009.05115302,"numberOfTrades":101956,"ignore":"0"},{"openTime":"2018-10-10T00:00:00","closeTime":"2018-10-10T23:59:59.999","open":6656.67,"high":6659.95,"low":6530.0,"close":6631.0,"volume":15390.661444,"quoteAssetVolume":101609680.88217257,"takerBuyBaseAssetVolume":6819.654895,"takerBuyQuoteAssetVolume":45031596.85703905,"numberOfTrades":99789,"ignore":"0"}]

const callSequenceRequest = [{"id":1,"type":"CREATE","req":{"currencyPair":"BTC_USDT","currency":"USD","description":"...Demo...","startTime":"2018-10-10T15:54:06"},"res":{"simulationId":1,"currency":"USD","balance":1000.0,"currencyPair":"BTC_USDT","description":"...Demo..."}},{"id":2,"type":"CREATE_ORDER","req":{"simulationId":1,"orderType":"BUY","amountOfTrade":25,"leverage":2,"startTime":"2018-10-10T18:54:06","realTimeRequest":false,"maxAmountOfTrade":false},"res":{"requestInfo":"BACK-TIME-REQUEST 2018-10-10T18:54:06","simulationId":1,"orderId":1,"orderType":"BUY","status":"OPEN_NOW","openPrice":6642.78,"openTime":"2018-10-10T18:54:04.999","leverage":2,"amountOfTrade":25,"liquidationPrice":3653.529}},{"id":3,"type":"CREATE_ORDER","req":{"simulationId":1,"orderType":"BUY","amountOfTrade":40,"leverage":1,"startTime":"2018-10-20T18:54:06","realTimeRequest":false,"maxAmountOfTrade":false},"res":{"requestInfo":"BACK-TIME-REQUEST 2018-10-20T18:54:06","simulationId":1,"orderId":2,"orderType":"BUY","status":"OPEN_NOW","openPrice":6565.39,"openTime":"2018-10-20T18:54:04.999","leverage":1,"amountOfTrade":40,"liquidationPrice":656.5389999999999}},{"id":4,"type":"CLOSE_ORDER","req":{"simulationId":1,"orderId":1,"realTimeRequest":false,"startTime":"2018-12-28T15:54:06"},"res":{"requestInfo":"BACK-TIME-REQUEST 2018-12-28T15:54:06","simulationId":1,"orderId":1,"orderType":"BUY","status":"LIQUIDATED","openPrice":6642.78,"closePrice":3666.03,"openTime":"2018-10-10T18:54:04","closeTime":"2018-11-25T10:24:59.999","leverage":2,"amountOfTrade":25.0,"liquidationPrice":3653.53,"profitLoss":-22.4897526167,"percentageChange":-90.0,"maxUnrealizedProfitDuringTrade":7.8071296,"maxUnrealizedLossDuringTrade":-22.5065377598,"durationOfTradeInSeconds":3943855,"maxPriceDuringTrade":7680.0,"minPriceDuringTrade":3652.66}},{"id":5,"type":"CREATE_ORDER","req":{"simulationId":1,"orderType":"SELL","amountOfTrade":50,"leverage":3,"startTime":"2018-12-30T15:54:06","realTimeRequest":false,"maxAmountOfTrade":false},"res":{"requestInfo":"BACK-TIME-REQUEST 2018-12-30T15:54:06","simulationId":1,"orderId":3,"orderType":"SELL","status":"OPEN_NOW","openPrice":3782.99,"openTime":"2018-12-30T15:54:04.999","leverage":3,"amountOfTrade":50,"liquidationPrice":4917.887}},{"id":6,"type":"CLOSE_ORDER","req":{"simulationId":1,"orderId":3,"realTimeRequest":false,"startTime":"2019-01-02T15:54:06"},"res":{"requestInfo":"BACK-TIME-REQUEST 2019-01-02T15:54:06","simulationId":1,"orderId":3,"orderType":"SELL","status":"CLOSED_WITH_LOSS","openPrice":3782.99,"closePrice":3800.0,"openTime":"2018-12-30T15:54:04","closeTime":"2019-01-02T15:54:59.999","leverage":3,"amountOfTrade":50.0,"liquidationPrice":4917.89,"profitLoss":-0.674484,"percentageChange":-1.0,"maxUnrealizedProfitDuringTrade":6.0531317106,"maxUnrealizedLossDuringTrade":-2.2458602634,"durationOfTradeInSeconds":259255,"maxPriceDuringTrade":3839.63,"minPriceDuringTrade":3630.33}},{"id":7,"type":"CREATE_ORDER","req":{"simulationId":1,"orderType":"BUY","amountOfTrade":100,"leverage":1,"startTime":"2019-01-30T15:54:06","realTimeRequest":false,"maxAmountOfTrade":false},"res":{"requestInfo":"BACK-TIME-REQUEST 2019-01-30T15:54:06","simulationId":1,"orderId":4,"orderType":"BUY","status":"OPEN_NOW","openPrice":3464.55,"openTime":"2019-01-30T15:54:04.999","leverage":1,"amountOfTrade":100,"liquidationPrice":346.4549999999999}},{"id":8,"type":"CREATE_ORDER","req":{"simulationId":1,"orderType":"BUY","amountOfTrade":75,"leverage":2,"startTime":"2019-02-03T15:54:06","realTimeRequest":false,"maxAmountOfTrade":false},"res":{"requestInfo":"BACK-TIME-REQUEST 2019-02-03T15:54:06","simulationId":1,"orderId":5,"orderType":"BUY","status":"OPEN_NOW","openPrice":3464.83,"openTime":"2019-02-03T15:54:04.999","leverage":2,"amountOfTrade":75,"liquidationPrice":1905.6565}},{"id":9,"type":"CREATE_ORDER","req":{"simulationId":1,"orderType":"BUY","amountOfTrade":150,"leverage":2,"startTime":"2019-02-09T15:54:06","realTimeRequest":false,"maxAmountOfTrade":false},"res":{"requestInfo":"BACK-TIME-REQUEST 2019-02-09T15:54:06","simulationId":1,"orderId":6,"orderType":"BUY","status":"OPEN_NOW","openPrice":3643.0,"openTime":"2019-02-09T15:54:04.999","leverage":2,"amountOfTrade":150,"liquidationPrice":2003.65}},{"id":10,"type":"CLOSE_ORDER","req":{"simulationId":1,"orderId":6,"realTimeRequest":false,"startTime":"2019-03-09T15:54:06"},"res":{"requestInfo":"BACK-TIME-REQUEST 2019-03-09T15:54:06","simulationId":1,"orderId":6,"orderType":"BUY","status":"CLOSED_WITH_PROFIT","openPrice":3643.0,"closePrice":3946.76,"openTime":"2019-02-09T15:54:04","closeTime":"2019-03-09T15:54:59.999","leverage":2,"amountOfTrade":150.0,"liquidationPrice":2003.65,"profitLoss":25.0145414396,"percentageChange":17.0,"maxUnrealizedProfitDuringTrade":45.70408258,"maxUnrealizedLossDuringTrade":-6.1671762519,"durationOfTradeInSeconds":2419255,"maxPriceDuringTrade":4198.0,"minPriceDuringTrade":3568.11}},{"id":11,"type":"CLOSE","req":{"simulationId":1,"startTime":"2019-07-10T15:54:06","realTimeRequest":false,"delete":false},"res":{"simulationId":1,"ordersIdsMap":{"1":{"requestInfo":"BACK-TIME-REQUEST 2019-07-10T15:54:06","simulationId":1,"orderId":1,"orderType":"BUY","status":"LIQUIDATED","openPrice":6642.78,"closePrice":3666.03,"openTime":"2018-10-10T18:54:04","closeTime":"2018-11-25T10:24:59","leverage":2,"amountOfTrade":25.0,"liquidationPrice":3653.53,"profitLoss":-22.49,"percentageChange":-90.0,"maxUnrealizedProfitDuringTrade":7.81,"maxUnrealizedLossDuringTrade":-22.51,"durationOfTradeInSeconds":3943855,"maxPriceDuringTrade":7680.0,"minPriceDuringTrade":3652.66},"2":{"requestInfo":"BACK-TIME-REQUEST 2019-07-10T15:54:06","simulationId":1,"orderId":2,"orderType":"BUY","status":"CLOSED_WITH_PROFIT","openPrice":6565.39,"closePrice":12400.04,"openTime":"2018-10-20T18:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":1,"amountOfTrade":40.0,"liquidationPrice":656.54,"profitLoss":35.5479877024,"percentageChange":89.0,"maxUnrealizedProfitDuringTrade":45.1130632,"maxUnrealizedLossDuringTrade":-20.7702965744,"durationOfTradeInSeconds":22712455,"maxPriceDuringTrade":13970.0,"minPriceDuringTrade":3156.26},"3":{"requestInfo":"BACK-TIME-REQUEST 2019-07-10T15:54:06","simulationId":1,"orderId":3,"orderType":"SELL","status":"CLOSED_WITH_LOSS","openPrice":3782.99,"closePrice":3800.0,"openTime":"2018-12-30T15:54:04","closeTime":"2019-01-02T15:54:59","leverage":3,"amountOfTrade":50.0,"liquidationPrice":4917.89,"profitLoss":-0.67,"percentageChange":-1.0,"maxUnrealizedProfitDuringTrade":6.05,"maxUnrealizedLossDuringTrade":-2.25,"durationOfTradeInSeconds":259255,"maxPriceDuringTrade":3839.63,"minPriceDuringTrade":3630.33},"4":{"requestInfo":"BACK-TIME-REQUEST 2019-07-10T15:54:06","simulationId":1,"orderId":4,"orderType":"BUY","status":"CLOSED_WITH_PROFIT","openPrice":3464.55,"closePrice":12400.04,"openTime":"2019-01-30T15:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":1,"amountOfTrade":100.0,"liquidationPrice":346.45,"profitLoss":257.9120265512,"percentageChange":258.0,"maxUnrealizedProfitDuringTrade":303.2270066,"maxUnrealizedLossDuringTrade":-2.639583682,"durationOfTradeInSeconds":13910455,"maxPriceDuringTrade":13970.0,"minPriceDuringTrade":3373.1},"5":{"requestInfo":"BACK-TIME-REQUEST 2019-07-10T15:54:06","simulationId":1,"orderId":5,"orderType":"BUY","status":"CLOSED_WITH_PROFIT","openPrice":3464.83,"closePrice":12400.04,"openTime":"2019-02-03T15:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":2,"amountOfTrade":75.0,"liquidationPrice":1905.66,"profitLoss":386.8246396868,"percentageChange":516.0,"maxUnrealizedProfitDuringTrade":454.7916149,"maxUnrealizedLossDuringTrade":-3.971181373,"durationOfTradeInSeconds":13564855,"maxPriceDuringTrade":13970.0,"minPriceDuringTrade":3373.1},"6":{"requestInfo":"BACK-TIME-REQUEST 2019-07-10T15:54:06","simulationId":1,"orderId":6,"orderType":"BUY","status":"CLOSED_WITH_PROFIT","openPrice":3643.0,"closePrice":3946.76,"openTime":"2019-02-09T15:54:04","closeTime":"2019-03-09T15:54:59","leverage":2,"amountOfTrade":150.0,"liquidationPrice":2003.65,"profitLoss":25.01,"percentageChange":17.0,"maxUnrealizedProfitDuringTrade":45.7,"maxUnrealizedLossDuringTrade":-6.17,"durationOfTradeInSeconds":2419255,"maxPriceDuringTrade":4198.0,"minPriceDuringTrade":3568.11}},"events":[{"time":"2018-10-10T18:54:04","orderId":1,"eventType":"CREATED_ORDER","balanceUpdate":-25.0,"orderType":"BUY","openPrice":6642.78,"closePrice":3666.03,"openTime":"2018-10-10T18:54:04","closeTime":"2018-11-25T10:24:59","leverage":2,"amountOfTrade":25.0,"percentageChange":-90.0},{"time":"2018-10-20T18:54:04","orderId":2,"eventType":"CREATED_ORDER","balanceUpdate":-40.0,"orderType":"BUY","openPrice":6565.39,"closePrice":12400.04,"openTime":"2018-10-20T18:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":1,"amountOfTrade":40.0,"percentageChange":89.0},{"time":"2018-11-25T10:24:59","orderId":1,"eventType":"CLOSED_ORDER","balanceUpdate":22.49,"orderType":"BUY","openPrice":6642.78,"closePrice":3666.03,"openTime":"2018-10-10T18:54:04","closeTime":"2018-11-25T10:24:59","leverage":2,"amountOfTrade":25.0,"percentageChange":-90.0},{"time":"2018-12-30T15:54:04","orderId":3,"eventType":"CREATED_ORDER","balanceUpdate":-50.0,"orderType":"SELL","openPrice":3782.99,"closePrice":3800.0,"openTime":"2018-12-30T15:54:04","closeTime":"2019-01-02T15:54:59","leverage":3,"amountOfTrade":50.0,"percentageChange":-1.0},{"time":"2019-01-02T15:54:59","orderId":3,"eventType":"CLOSED_ORDER","balanceUpdate":0.67,"orderType":"SELL","openPrice":3782.99,"closePrice":3800.0,"openTime":"2018-12-30T15:54:04","closeTime":"2019-01-02T15:54:59","leverage":3,"amountOfTrade":50.0,"percentageChange":-1.0},{"time":"2019-01-30T15:54:04","orderId":4,"eventType":"CREATED_ORDER","balanceUpdate":-100.0,"orderType":"BUY","openPrice":3464.55,"closePrice":12400.04,"openTime":"2019-01-30T15:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":1,"amountOfTrade":100.0,"percentageChange":258.0},{"time":"2019-02-03T15:54:04","orderId":5,"eventType":"CREATED_ORDER","balanceUpdate":-75.0,"orderType":"BUY","openPrice":3464.83,"closePrice":12400.04,"openTime":"2019-02-03T15:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":2,"amountOfTrade":75.0,"percentageChange":516.0},{"time":"2019-02-09T15:54:04","orderId":6,"eventType":"CREATED_ORDER","balanceUpdate":-150.0,"orderType":"BUY","openPrice":3643.0,"closePrice":3946.76,"openTime":"2019-02-09T15:54:04","closeTime":"2019-03-09T15:54:59","leverage":2,"amountOfTrade":150.0,"percentageChange":17.0},{"time":"2019-03-09T15:54:59","orderId":6,"eventType":"CLOSED_ORDER","balanceUpdate":25.01,"orderType":"BUY","openPrice":3643.0,"closePrice":3946.76,"openTime":"2019-02-09T15:54:04","closeTime":"2019-03-09T15:54:59","leverage":2,"amountOfTrade":150.0,"percentageChange":17.0},{"time":"2019-07-10T15:54:59","orderId":4,"eventType":"CLOSED_SIMULATION","balanceUpdate":257.91,"orderType":"BUY","openPrice":3464.55,"closePrice":12400.04,"openTime":"2019-01-30T15:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":1,"amountOfTrade":100.0,"percentageChange":258.0},{"time":"2019-07-10T15:54:59","orderId":2,"eventType":"CLOSED_SIMULATION","balanceUpdate":35.55,"orderType":"BUY","openPrice":6565.39,"closePrice":12400.04,"openTime":"2018-10-20T18:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":1,"amountOfTrade":40.0,"percentageChange":89.0},{"time":"2019-07-10T15:54:59","orderId":5,"eventType":"CLOSED_SIMULATION","balanceUpdate":386.82,"orderType":"BUY","openPrice":3464.83,"closePrice":12400.04,"openTime":"2019-02-03T15:54:04","closeTime":"2019-07-10T15:54:59.999","leverage":2,"amountOfTrade":75.0,"percentageChange":516.0}],"initialBalance":1000.0,"finalBalance":1682.13,"balancePercentageChange":68.0,"numOrders":6,"numOrdersInProfit":4,"numOrdersInLoss":1,"numOrderLiquidated":1,"numOrderOpen":0,"percentageOrderProfit":150.0,"percentageNumOrderLoss":600.0,"percentageNumOrderLiquidated":600.0,"percentageNumOrderOpen":0,"durationOfSimulationInSeconds":202366195}}]

let COUNTER = 0;
const STEP_ONE = "STEP INT";
const NEXT_STEP = "NEXT STEP";
const CALL_GET_CANDLES = "Call GET /candles";
const CALLED_GET_CANDLES = "Called GET /candles";
const CALL_POST_SIMULATION = "Call: POST /simulation";
const CALLED_POST_SIMULATION = "Called: POST /simulation";
const CALL_CREATE_ORDER = "Call: POST /order";
const CALLED_CREATE_ORDER = "Called: POST /order";
const CALL_CLOSE_ORDER = "Call: PUT /order";
const CALLED_CLOSE_ORDER = "Called: PUT /order";
const CALL_CLOSE_SIMULATION = "Call: PUT /simulation";
const CALLED_CLOSE_SIMULATION = "Called: PUT /simulation";

function initDemo(){
    buttonCallView.textContent = CALL_GET_CANDLES;
    reqDto.textContent = JSON.stringify(candlesReq, null, 2);
    buttonCallView.removeEventListener("click", initDemo);
    buttonCallView.addEventListener("click", fetchGetCandles);
}

function fetchGetCandles(){
    const candlesReq = {"currencyPair":"BTC_USDT","timeFrame":"ONE_DAY","startTime":"2018-08-01T00:00:00","endTime":"2018-10-10T15:54:06"};
    buttonCallView.removeEventListener("click", fetchGetCandles);
    buttonCallView.textContent = CALLED_GET_CANDLES;
    resDto.textContent = JSON.stringify(candlesRes, null, 2);
    buildBtcChart(candlesRes);
    setTimeout(() => {
        buttonCallView.textContent = NEXT_STEP;
        buttonCallView.addEventListener("click", preCreateSimulation);
    }, 2000);
}

function preCreateSimulation() {
    deserializeSequenceRequest(callSequenceRequest[0]);
}

function preCreateOrder() {
    deserializeSequenceRequest(callSequenceRequest[++COUNTER]);
}

function createSimulation() {
    buttonCallView.removeEventListener("click", createSimulation);
    resDto.textContent = JSON.stringify(callSequenceRequest[0].res, null, 2);
    buttonCallView.textContent = CALLED_POST_SIMULATION;
    setTimeout(() => {
        buttonCallView.textContent = NEXT_STEP;
        buttonCallView.addEventListener("click", preCreateOrder);
    }, 2000);
}

function createOrder() {
    buttonCallView.removeEventListener("click", createOrder);
    resDto.textContent = JSON.stringify(callSequenceRequest[COUNTER].res, null, 2);
    buttonCallView.textContent = CALLED_CREATE_ORDER;
    setTimeout(() => {
        buttonCallView.textContent = NEXT_STEP;
        buttonCallView.addEventListener("click", preNextAction);
    }, 2000);
}

function closeOrder() {
    buttonCallView.removeEventListener("click", closeOrder);
    resDto.textContent = JSON.stringify(callSequenceRequest[COUNTER].res, null, 2);
    buttonCallView.textContent = CALLED_CLOSE_ORDER;
    setTimeout(() => {
        buttonCallView.textContent = NEXT_STEP;
        buttonCallView.addEventListener("click", preNextAction);
    }, 2000);
}

function closeSimulation() {
    buttonCallView.removeEventListener("click", closeSimulation);
    resDto.textContent = JSON.stringify(callSequenceRequest[COUNTER].res, null, 2);
    buttonCallView.textContent = CALLED_CLOSE_SIMULATION;
}

function preNextAction() {
    buttonCallView.removeEventListener("click", preNextAction);
    deserializeSequenceRequest(callSequenceRequest[++COUNTER])
}

function deserializeSequenceRequest(json) {    
        switch (json.type) {
            case "CREATE":
                buttonCallView.removeEventListener("click", preCreateSimulation);
                reqDto.textContent = JSON.stringify(json.req, null, 2);
                resDto.textContent = "";
                buttonCallView.textContent = CALL_POST_SIMULATION;
                buttonCallView.addEventListener("click", createSimulation);
                return ;
            case "CREATE_ORDER":
                buttonCallView.removeEventListener("click", preCreateOrder);
                reqDto.textContent = JSON.stringify(json.req, null, 2);
                resDto.textContent = "";
                buttonCallView.textContent = CALL_CREATE_ORDER;
                buttonCallView.addEventListener("click", createOrder);
                return ;
            case "CLOSE_ORDER":
                buttonCallView.removeEventListener("click", preCreateOrder);
                reqDto.textContent = JSON.stringify(json.req, null, 2);
                resDto.textContent = "";
                buttonCallView.textContent = CALLED_CLOSE_ORDER;
                buttonCallView.addEventListener("click", createOrder);
                return;
            case "CLOSE":
                buttonCallView.removeEventListener("click", preCreateOrder);
                reqDto.textContent = JSON.stringify(json.req, null, 2);
                resDto.textContent = "";
                buttonCallView.textContent = CALLED_CLOSE_SIMULATION;
                buttonCallView.addEventListener("click", closeSimulation);
                return;
            default:
                throw new Error(`Tipo di richiesta sconosciuto: ${json.type}`);
    };
}

function buildBtcChart(request) {
    const chartContainer = document.getElementById("chart");
    const chartCanvas = document.createElement("canvas");
    chartContainer.appendChild(chartCanvas);
    const ctx = chartCanvas.getContext("2d");
    new Chart(ctx, {
        type: "line",
        data: {
            labels: request.map(entry => entry.openTime),
            datasets: [{
                label: "Bitcoin Price",
                data: request.map(entry => entry.close),
                borderColor: "#4CAF50",
                backgroundColor: "rgba(76, 175, 80, 0.2)",
                borderWidth: 2,
                pointRadius: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {title: {display: true,text: "Date"}},
                y: {title: {display: true,text: "Close Price"}}
            }
        }
    });
}

const buttonCallView = document.getElementById('buttonCallView');
const reqDto = document.getElementById('reqDto');
const resDto = document.getElementById('resDto');
buttonCallView.addEventListener("click", initDemo);